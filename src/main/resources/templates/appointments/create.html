<html lang="en" th:replace="~{shared/_layout::layout('Create Page', '', ~{::div#naja}, '', ~{::ol.breadcrumb})}">

<ol class="breadcrumb">
    <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
    <li class="breadcrumb-item active">Dashboard</li>
</ol>

<div id="naja">

    <div class="container mt-4">
        <h2>Create New Appointment and Patient</h2>

        <!-- Patient Creation Form -->
        <h3>Create New Patient</h3>
        <form th:action="@{/patients}" th:object="${patient}" method="post">
            <!-- Patient First Name -->
            <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" th:field="*{firstName}" class="form-control" placeholder="Enter first name" required>
                <span class="text-danger" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></span>
            </div>

            <!-- Patient Last Name -->
            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" th:field="*{lastName}" class="form-control" placeholder="Enter last name" required>
                <span class="text-danger" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></span>
            </div>

            <!-- Patient Personal Number -->
            <div class="form-group">
                <label for="personalNo">Personal Number</label>
                <input type="text" id="personalNo" th:field="*{personalNo}" class="form-control" placeholder="Enter personal number" required>
                <span class="text-danger" th:if="${#fields.hasErrors('personalNo')}" th:errors="*{personalNo}"></span>
            </div>

            <!-- Patient Email -->
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" th:field="*{email}" class="form-control" placeholder="Enter email address" required>
                <span class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></span>
            </div>

            <!-- Patient Phone Number -->
            <div class="form-group">
                <label for="phoneNumber">Phone Number</label>
                <input type="tel" id="phoneNumber" th:field="*{phoneNumber}" class="form-control" placeholder="Enter phone number" required>
                <span class="text-danger" th:if="${#fields.hasErrors('phoneNumber')}" th:errors="*{phoneNumber}"></span>
            </div>

            <!-- Patient Address -->
            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" id="address" th:field="*{address}" class="form-control" placeholder="Enter address">
                <span class="text-danger" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></span>
            </div>

            <!-- Patient City -->
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" id="city" th:field="*{city}" class="form-control" placeholder="Enter city">
                <span class="text-danger" th:if="${#fields.hasErrors('city')}" th:errors="*{city}"></span>
            </div>

            <!-- Patient Gender -->
            <div class="form-group">
                <label for="gender">Gender</label><br>
                <input type="radio" id="male" th:field="*{gender}" value="M"> Male &nbsp;
                <input type="radio" id="female" th:field="*{gender}" value="F"> Female
                <span class="text-danger" th:if="${#fields.hasErrors('gender')}" th:errors="*{gender}"></span>
            </div>

            <!-- Patient Birth Date -->
            <div class="form-group">
                <label for="birthDate">Birth Date</label>
                <input type="date" id="birthDate" th:field="*{birthDate}" class="form-control" required>
                <span class="text-danger" th:if="${#fields.hasErrors('birthDate')}" th:errors="*{birthDate}"></span>
            </div>

            <!-- Patient Notes -->
            <div class="form-group">
                <label for="notes">Notes</label>
                <textarea id="notes" th:field="*{notes}" class="form-control" rows="4"></textarea>
                <span class="text-danger" th:if="${#fields.hasErrors('notes')}" th:errors="*{notes}"></span>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary">Create Patient</button>
            <a href="/patients" class="btn btn-secondary">Back</a>
        </form>

        <hr>

        <!-- Appointment Creation Form -->
        <h3>Create New Appointment</h3>
        <form th:action="@{/appointments}" method="post">
            <!-- Patient Selection (Dropdown) -->
            <div class="form-group">
                <label for="patientId">Select Patient</label>
                <select id="patientId" name="patientId" class="form-control" required>
                    <option th:each="patient : ${patients}" th:value="${patient.id}" th:text="${patient.firstName} + ' ' + ${patient.lastName}"></option>
                </select>
            </div>

            <!-- Doctor Selection (Dropdown) -->
            <div class="form-group">
                <label for="doctorId">Select Doctor</label>
                <select id="doctorId" name="doctorId" class="form-control" required>
                    <option th:each="doctor : ${doctors}" th:value="${doctor.id}" th:text="${doctor.firstName} + ' ' + ${doctor.lastName}"></option>
                </select>
            </div>

            <!-- Appointment Date -->
            <div class="form-group">
                <label for="appointmentDate">Appointment Date</label>
                <input type="datetime-local" id="appointmentDate" name="appointmentDate" class="form-control" required>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary">Create Appointment</button>
        </form>

    </div>
</div>
</html>
